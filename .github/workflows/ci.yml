# ---------------------------------------------
# CI Pipeline for Demo_Export_Files_Comparison
# ---------------------------------------------
# This workflow runs on every push and pull request to the main branch.
# It sets up Python 3.11, installs dependencies, and runs Behave BDD tests.
# ---------------------------------------------

name: CI Pipeline

on:
  push:
    branches: [main]  # Triggers when code is pushed to 'main'
  pull_request:
    branches: [main]  # Triggers for PRs targeting 'main'

jobs:
  test:
    name: Run Behave BDD Tests
    runs-on: ubuntu-latest  # GitHub-hosted Ubuntu environment

    steps:
      - name: â¬‡ï¸ Checkout Repository
        uses: actions/checkout@v4
        # Retrieves your code so the workflow can access it

      - name: âš™ï¸ Set Up Python 3.11
        uses: actions/setup-python@v5
        with:
          python-version: "3.11"
        # Ensures consistency with your local Python version (3.11.11)

      - name: ğŸ’¾ Cache pip dependencies
        uses: actions/cache@v3
        with:
          path: ~/.cache/pip
          key: ${{ runner.os }}-pip-${{ hashFiles('**/requirements.txt') }}
          restore-keys: |
            ${{ runner.os }}-pip-
        # Speeds up installs by caching Python packages between runs

      - name: ğŸ“¦ Install project dependencies
        run: |
          python -m pip install --upgrade pip
          pip install -r requirements.txt
        # Installs everything listed in your requirements.txt

      - name: ğŸ§ª Run Behave Tests
        run: behave
        # Executes your BDD tests located under /features

      # Optional: future enhancement points below
      # - name: ğŸ“Š Upload Allure Report
      # - name: ğŸš€ Trigger deployment (after passing tests)
